<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>QuitBet AI - Dashboard v2</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            background: #111827;
            color: #f9fafb;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            min-height: 100vh;
            padding: 0;
            overflow-x: hidden;
        }
        
        .container {
            max-width: 100%;
            margin: 0;
            padding: 0;
        }
        
        .header {
            text-align: center;
            padding: 40px 24px 20px;
            background: linear-gradient(135deg, #1f2937 0%, #374151 100%);
            border-bottom: 1px solid #374151;
        }
        
        .title {
            font-size: 28px;
            font-weight: 700;
            color: #60a5fa;
            margin-bottom: 8px;
            letter-spacing: -0.5px;
        }
        
        .subtitle {
            font-size: 16px;
            color: #9ca3af;
            font-weight: 400;
        }
        
        .nav {
            display: flex;
            justify-content: space-around;
            background: #1f2937;
            padding: 8px;
            margin: 0;
            border-bottom: 1px solid #374151;
            position: sticky;
            top: 0;
            z-index: 100;
        }
        
        .nav-item {
            padding: 12px 8px;
            color: #9ca3af;
            cursor: pointer;
            border-radius: 12px;
            transition: all 0.2s ease;
            font-weight: 500;
            font-size: 14px;
            text-align: center;
            flex: 1;
            margin: 0 2px;
        }
        
        .nav-item:hover {
            background: rgba(96, 165, 250, 0.1);
            color: #60a5fa;
        }
        
        .nav-item.active {
            background: #60a5fa;
            color: #000;
            box-shadow: 0 2px 8px rgba(96, 165, 250, 0.3);
        }
        
        .content {
            background: transparent;
            padding: 24px;
            margin: 0;
            min-height: calc(100vh - 200px);
        }
        
        .card {
            background: #1f2937;
            border-radius: 16px;
            padding: 24px;
            margin-bottom: 16px;
            border: 1px solid #374151;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
        }
        
        .card h2 {
            color: #f9fafb;
            margin-bottom: 16px;
            font-size: 20px;
            font-weight: 600;
        }
        
        .card p {
            color: #d1d5db;
            margin-bottom: 12px;
            line-height: 1.5;
        }
        
        .progress-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 16px;
            margin-top: 20px;
        }
        
        .progress-item {
            background: #374151;
            padding: 16px;
            border-radius: 12px;
            text-align: center;
            border: 1px solid #4b5563;
        }
        
        .progress-item h3 {
            color: #60a5fa;
            font-size: 24px;
            font-weight: 700;
            margin-bottom: 4px;
        }
        
        .progress-item p {
            color: #9ca3af;
            font-size: 14px;
            margin: 0;
        }
        
        .fab-container {
            position: fixed;
            bottom: 24px;
            right: 24px;
            display: flex;
            flex-direction: column;
            gap: 12px;
            z-index: 1000;
        }
        
        .fab {
            width: 56px;
            height: 56px;
            border-radius: 28px;
            border: none;
            color: white;
            font-size: 20px;
            cursor: pointer;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
            transition: all 0.2s ease;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .fab:hover {
            transform: scale(1.05);
        }
        
        .fab.crisis {
            background: #60a5fa;
        }
        
        .fab.sos {
            background: #dc2626;
        }
        
        .logout-button {
            background: #dc2626;
            color: white;
            border: none;
            padding: 16px 24px;
            border-radius: 12px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            width: 100%;
            margin-top: 24px;
            box-shadow: 0 4px 12px rgba(220, 38, 38, 0.3);
            transition: all 0.2s ease;
        }
        
        .logout-button:hover {
            background: #b91c1c;
            transform: translateY(-2px);
        }
        
        .button {
            background: #60a5fa;
            color: #000;
            border: none;
            padding: 12px 24px;
            border-radius: 12px;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            margin-top: 12px;
            box-shadow: 0 2px 8px rgba(96, 165, 250, 0.3);
            transition: all 0.2s ease;
        }
        
        .button:hover {
            background: #3b82f6;
            transform: translateY(-1px);
        }
        
        .textarea {
            width: 100%;
            padding: 16px;
            border-radius: 12px;
            border: 1px solid #4b5563;
            background: #374151;
            color: #f9fafb;
            font-size: 14px;
            resize: vertical;
            font-family: inherit;
            margin-bottom: 12px;
        }
        
        .textarea:focus {
            outline: none;
            border-color: #60a5fa;
            box-shadow: 0 0 0 2px rgba(96, 165, 250, 0.2);
        }
        
        .contact-card {
            background: #374151;
            padding: 16px;
            border-radius: 12px;
            margin-bottom: 12px;
            border: 1px solid #4b5563;
        }
        
        .contact-card h4 {
            color: #f9fafb;
            margin-bottom: 8px;
            font-size: 16px;
        }
        
        .contact-card p {
            color: #d1d5db;
            margin-bottom: 4px;
            font-size: 14px;
        }
        
        .contact-button {
            background: #60a5fa;
            color: #000;
            border: none;
            padding: 8px 16px;
            border-radius: 8px;
            font-size: 12px;
            font-weight: 600;
            cursor: pointer;
            margin-top: 8px;
        }
        
        .task-item {
            display: flex;
            align-items: center;
            padding: 12px 0;
            border-bottom: 1px solid #374151;
        }
        
        .task-item:last-child {
            border-bottom: none;
        }
        
        .task-checkbox {
            margin-right: 12px;
            transform: scale(1.2);
        }
        
        .task-label {
            color: #f9fafb;
            font-size: 14px;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1 class="title">QuitBet AI</h1>
            <p class="subtitle">Welcome back, <span id="userName">Rok</span>!</p>
        </div>
        
        <div class="nav">
            <div class="nav-item active" onclick="showTab('dashboard')">Dashboard</div>
            <div class="nav-item" onclick="showTab('chat')">Chat</div>
            <div class="nav-item" onclick="showTab('journal')">Journal</div>
            <div class="nav-item" onclick="showTab('tasks')">Tasks</div>
            <div class="nav-item" onclick="showTab('finance')">Finance</div>
            <div class="nav-item" onclick="showTab('crisis')">Crisis</div>
            <div class="nav-item" onclick="showTab('contacts')">Contacts</div>
        </div>
        
        <div class="content" id="content">
            <div class="card">
                <h2>Dashboard</h2>
                <p>Welcome to your recovery dashboard.</p>
                <p>Track your progress and stay motivated.</p>
                
                <div class="progress-grid">
                    <div class="progress-item">
                        <h3>1</h3>
                        <p>Days gambling-free</p>
                    </div>
                    <div class="progress-item">
                        <h3>0</h3>
                        <p>Journal entries</p>
                    </div>
                    <div class="progress-item">
                        <h3>0</h3>
                        <p>Chat sessions</p>
                    </div>
                    <div class="progress-item">
                        <h3>$0</h3>
                        <p>Money saved</p>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="fab-container">
            <div class="fab crisis" onclick="showTab('crisis')" title="Crisis Support">🆘</div>
            <div class="fab sos" onclick="callEmergency()" title="Emergency SOS">🚨</div>
        </div>
        
        <div style="padding: 24px;">
            <button class="logout-button" onclick="logout()">Logout</button>
        </div>
    </div>

    <script>
        // Check if user is logged in
        if (!localStorage.getItem('isLoggedIn')) {
            window.location.href = '/';
        }
        
        // Set user name
        const userName = localStorage.getItem('userName') || 'Rok';
        document.getElementById('userName').textContent = userName;
        
        function showTab(tab) {
            // Remove active class from all nav items
            document.querySelectorAll('.nav-item').forEach(item => {
                item.classList.remove('active');
            });
            
            // Add active class to clicked item
            event.target.classList.add('active');
            
            // Update content based on tab
            const content = document.getElementById('content');
            switch(tab) {
                case 'dashboard':
                    content.innerHTML = `
                        <div class="card">
                            <h2>Dashboard</h2>
                            <p>Welcome to your recovery dashboard.</p>
                            <p>Track your progress and stay motivated.</p>
                            
                            <div class="progress-grid">
                                <div class="progress-item">
                                    <h3>1</h3>
                                    <p>Days gambling-free</p>
                                </div>
                                <div class="progress-item">
                                    <h3>0</h3>
                                    <p>Journal entries</p>
                                </div>
                                <div class="progress-item">
                                    <h3>0</h3>
                                    <p>Chat sessions</p>
                                </div>
                                <div class="progress-item">
                                    <h3>$0</h3>
                                    <p>Money saved</p>
                                </div>
                            </div>
                        </div>
                    `;
                    break;
                case 'chat':
                    content.innerHTML = `
                        <div class="card">
                            <h2>AI Chat</h2>
                            <p>Chat with our AI assistant for support and guidance.</p>
                            
                            <div id="chatMessages" style="height: 300px; overflow-y: auto; background: #374151; border-radius: 12px; padding: 16px; margin-bottom: 16px; border: 1px solid #4b5563;">
                                <div style="color: #60a5fa; margin-bottom: 8px;">🤖 AI: Hello! I'm here to support you on your recovery journey. How are you feeling today?</div>
                            </div>
                            
                            <div style="display: flex; gap: 8px;">
                                <input type="text" id="chatInput" placeholder="Type your message..." style="flex: 1; padding: 12px; border-radius: 12px; border: 1px solid #4b5563; background: #374151; color: #f9fafb; font-size: 14px;" onkeypress="handleChatKeyPress(event)">
                                <button class="button" onclick="sendMessage()" style="margin: 0;">Send</button>
                            </div>
                        </div>
                    `;
                    break;
                case 'journal':
                    content.innerHTML = `
                        <div class="card">
                            <h2>Journal</h2>
                            <p>Record your thoughts and feelings.</p>
                            
                            <div style="margin-bottom: 16px;">
                                <label style="color: #9ca3af; font-size: 14px; margin-bottom: 8px; display: block;">How are you feeling today?</label>
                                <select id="moodSelect" style="width: 100%; padding: 12px; border-radius: 12px; border: 1px solid #4b5563; background: #374151; color: #f9fafb; font-size: 14px; margin-bottom: 16px;">
                                    <option value="great">😊 Great</option>
                                    <option value="good">🙂 Good</option>
                                    <option value="okay">😐 Okay</option>
                                    <option value="struggling">😔 Struggling</option>
                                    <option value="difficult">😰 Difficult</option>
                                </select>
                            </div>
                            
                            <textarea class="textarea" placeholder="Write about your day, your feelings, or your recovery journey..." rows="6"></textarea>
                            
                            <div style="display: flex; gap: 12px; margin-top: 16px;">
                                <button class="button" onclick="saveJournal()" style="flex: 1;">Save Entry</button>
                                <button class="button" onclick="viewJournalEntries()" style="flex: 1; background: #6b7280;">View Entries</button>
                            </div>
                        </div>
                    `;
                    break;
                case 'tasks':
                    content.innerHTML = `
                        <div class="card">
                            <h2>Tasks</h2>
                            <p>Complete daily tasks to build healthy habits.</p>
                            <div class="task-item">
                                <input type="checkbox" class="task-checkbox" id="task1">
                                <label class="task-label" for="task1">Take a 10-minute walk</label>
                            </div>
                            <div class="task-item">
                                <input type="checkbox" class="task-checkbox" id="task2">
                                <label class="task-label" for="task2">Practice deep breathing for 5 minutes</label>
                            </div>
                            <div class="task-item">
                                <input type="checkbox" class="task-checkbox" id="task3">
                                <label class="task-label" for="task3">Call a friend or family member</label>
                            </div>
                            <div class="task-item">
                                <input type="checkbox" class="task-checkbox" id="task4">
                                <label class="task-label" for="task4">Write in your journal</label>
                            </div>
                        </div>
                    `;
                    break;
                case 'finance':
                    // Calculate financial data
                    const expenses = JSON.parse(localStorage.getItem('expenses') || '[]');
                    const totalExpenses = expenses.reduce((sum, expense) => sum + expense.amount, 0);
                    const todayExpenses = expenses.filter(expense => expense.date === new Date().toLocaleDateString());
                    const todayTotal = todayExpenses.reduce((sum, expense) => sum + expense.amount, 0);
                    const monthlyGoal = 500;
                    const progress = Math.min((totalExpenses / monthlyGoal) * 100, 100);
                    
                    content.innerHTML = `
                        <div class="card">
                            <h2>Finance</h2>
                            <p>Track your financial recovery.</p>
                            
                            <div class="progress-grid">
                                <div class="progress-item">
                                    <h3>$${todayTotal.toFixed(2)}</h3>
                                    <p>Spent today</p>
                                </div>
                                <div class="progress-item">
                                    <h3>$${totalExpenses.toFixed(2)}</h3>
                                    <p>Total expenses</p>
                                </div>
                                <div class="progress-item">
                                    <h3>$${monthlyGoal}</h3>
                                    <p>Monthly goal</p>
                                </div>
                                <div class="progress-item">
                                    <h3>${progress.toFixed(0)}%</h3>
                                    <p>Progress</p>
                                </div>
                            </div>
                            
                            <div style="margin-top: 20px;">
                                <h3 style="color: #60a5fa; margin-bottom: 12px;">Recent Expenses</h3>
                                ${expenses.length > 0 ? expenses.slice(0, 5).map(expense => `
                                    <div style="background: #374151; padding: 12px; border-radius: 8px; margin-bottom: 8px; display: flex; justify-content: space-between; align-items: center;">
                                        <div>
                                            <span style="color: #f9fafb; font-weight: 600;">$${expense.amount.toFixed(2)}</span>
                                            <span style="color: #9ca3af; font-size: 12px; margin-left: 8px;">${expense.date}</span>
                                        </div>
                                        <button onclick="deleteExpense(${expense.id})" style="background: #dc2626; color: white; border: none; padding: 4px 8px; border-radius: 4px; font-size: 12px;">Delete</button>
                                    </div>
                                `).join('') : '<p style="color: #9ca3af;">No expenses yet</p>'}
                            </div>
                            
                            <div style="display: flex; gap: 12px; margin-top: 16px;">
                                <button class="button" onclick="addExpense()" style="flex: 1;">Add Expense</button>
                                <button class="button" onclick="addSavings()" style="flex: 1; background: #34d399;">Add Savings</button>
                            </div>
                        </div>
                    `;
                    break;
                case 'crisis':
                    content.innerHTML = `
                        <div class="card">
                            <h2>Crisis Support</h2>
                            <p>If you're in crisis, please reach out for immediate help.</p>
                            
                            <div style="background: #374151; padding: 16px; border-radius: 12px; margin: 16px 0;">
                                <h3 style="color: #f9fafb; margin-bottom: 12px;">Emergency Contacts</h3>
                                <p style="color: #d1d5db; margin-bottom: 8px;">📞 National Problem Gambling Helpline: <strong>1-800-522-4700</strong></p>
                                <p style="color: #d1d5db; margin-bottom: 8px;">💬 Crisis Text Line: <strong>Text HOME to 741741</strong></p>
                                <p style="color: #d1d5db; margin-bottom: 16px;">🆘 National Suicide Prevention Lifeline: <strong>988</strong></p>
                                <button class="button" onclick="callEmergency()" style="background: #dc2626; color: white;">Call Emergency Services</button>
                            </div>
                        </div>
                    `;
                    break;
                case 'contacts':
                    // Load saved contacts
                    const savedContacts = JSON.parse(localStorage.getItem('contacts') || '[]');
                    
                    let contactsHtml = `
                        <div class="card">
                            <h2>Support Contacts</h2>
                            <p>Your personal support network and professional contacts.</p>
                            
                            <h3 style="color: #60a5fa; margin: 20px 0 12px 0;">Professional Support</h3>
                            <div class="contact-card">
                                <h4>🏥 Dr. Sarah Johnson - Therapist</h4>
                                <p>📞 Phone: (555) 123-4567</p>
                                <p>📧 Email: sarah.johnson@therapy.com</p>
                                <button class="contact-button" onclick="callContact('therapist')">Call</button>
                            </div>
                            
                            <div class="contact-card">
                                <h4>👨‍⚕️ Mike Chen - Counselor</h4>
                                <p>📞 Phone: (555) 987-6543</p>
                                <p>📧 Email: mike.chen@recovery.org</p>
                                <button class="contact-button" onclick="callContact('counselor')">Call</button>
                            </div>
                            
                            <h3 style="color: #60a5fa; margin: 20px 0 12px 0;">Personal Support</h3>
                            <div class="contact-card">
                                <h4>👨‍👩‍👧‍👦 Mom & Dad</h4>
                                <p>📞 Phone: (555) 456-7890</p>
                                <button class="contact-button" onclick="callContact('family')">Call</button>
                            </div>
                            
                            <div class="contact-card">
                                <h4>👥 Gamblers Anonymous</h4>
                                <p>📞 Phone: (555) 321-0987</p>
                                <p>📍 Meeting: Tuesdays 7 PM</p>
                                <button class="contact-button" onclick="callContact('support-group')">Call</button>
                            </div>
                    `;
                    
                    // Add saved contacts
                    if (savedContacts.length > 0) {
                        contactsHtml += `<h3 style="color: #60a5fa; margin: 20px 0 12px 0;">Your Contacts</h3>`;
                        savedContacts.forEach(contact => {
                            contactsHtml += `
                                <div class="contact-card">
                                    <h4>👤 ${contact.name}</h4>
                                    <p>📞 Phone: ${contact.phone}</p>
                                    <button class="contact-button" onclick="callSavedContact('${contact.name}', '${contact.phone}')">Call</button>
                                    <button class="contact-button" onclick="deleteContact(${contact.id})" style="background: #dc2626; margin-left: 8px;">Delete</button>
                                </div>
                            `;
                        });
                    }
                    
                    contactsHtml += `<button class="button" onclick="addContact()">Add New Contact</button></div>`;
                    
                    content.innerHTML = contactsHtml;
                    break;
            }
        }
        
        function logout() {
            localStorage.removeItem('isLoggedIn');
            localStorage.removeItem('userEmail');
            localStorage.removeItem('userName');
            localStorage.removeItem('userPassword');
            alert('Logged out successfully!');
            window.location.href = '/';
        }
        
        function sendMessage() {
            const input = document.getElementById('chatInput');
            const message = input.value.trim();
            if (!message) {
                return;
            }
            
            // Add user message to chat
            addMessageToChat('You', message, '#60a5fa');
            input.value = '';
            
            // Simulate AI response based on user input
            setTimeout(() => {
                let response = "";
                const lowerMessage = message.toLowerCase();
                
                if (lowerMessage.includes('step') || lowerMessage.includes('plan') || lowerMessage.includes('help')) {
                    response = "Here's a step-by-step plan to help you stop gambling:\n\n1. **Acknowledge the problem** - You've already done this by reaching out!\n2. **Set a quit date** - Choose a specific date to stop completely\n3. **Remove triggers** - Delete gambling apps, block gambling sites\n4. **Find alternatives** - Replace gambling with healthy activities\n5. **Build support** - Connect with friends, family, or support groups\n6. **Track progress** - Use this app to monitor your recovery\n7. **Celebrate milestones** - Reward yourself for each day gambling-free\n\nWould you like me to help you with any specific step?";
                } else if (lowerMessage.includes('urge') || lowerMessage.includes('craving') || lowerMessage.includes('want to gamble')) {
                    response = "When you feel the urge to gamble, try these techniques:\n\n🚨 **Immediate actions:**\n• Take 10 deep breaths\n• Call a support person\n• Go for a walk\n• Do something with your hands\n\n💪 **Long-term strategies:**\n• Identify your triggers\n• Practice mindfulness\n• Keep busy with hobbies\n• Remember why you're quitting\n\nYou've got this! The urge will pass.";
                } else if (lowerMessage.includes('relapse') || lowerMessage.includes('slipped') || lowerMessage.includes('gambled')) {
                    response = "It's okay - relapses are part of recovery. Don't be too hard on yourself.\n\n**What to do now:**\n1. Stop immediately - don't chase losses\n2. Remove yourself from the situation\n3. Call someone for support\n4. Learn from this experience\n5. Get back on track\n\n**Remember:** Every day is a new chance to start fresh. You're still making progress!";
                } else if (lowerMessage.includes('money') || lowerMessage.includes('debt') || lowerMessage.includes('financial')) {
                    response = "Financial recovery is important. Here are some steps:\n\n💰 **Immediate actions:**\n• Stop all gambling immediately\n• Create a budget\n• Cut unnecessary expenses\n• Consider debt consolidation\n\n📊 **Track your progress:**\n• Use the Finance tab in this app\n• Monitor money saved daily\n• Set realistic financial goals\n\n💡 **Remember:** Every dollar not gambled is money saved!";
                } else if (lowerMessage.includes('family') || lowerMessage.includes('relationship') || lowerMessage.includes('support')) {
                    response = "Building a support system is crucial for recovery:\n\n👨‍👩‍👧‍👦 **Family & Friends:**\n• Be honest about your struggles\n• Ask for their support\n• Let them know how they can help\n• Consider family therapy\n\n🤝 **Professional Support:**\n• Therapists specializing in gambling addiction\n• Support groups (Gamblers Anonymous)\n• Financial counselors\n• This AI assistant (me!)\n\nYou don't have to do this alone!";
                } else {
                    const responses = [
                        "I'm here to support you on your recovery journey. What specific challenge are you facing today?",
                        "It's great that you're reaching out for help. How can I best support you right now?",
                        "I understand this is difficult. What would be most helpful for you to hear right now?",
                        "You're taking important steps by seeking support. What's on your mind?",
                        "I'm proud of you for reaching out. What's been the most challenging part of your day?",
                        "Remember, recovery is a journey with ups and downs. How are you feeling right now?",
                        "You're stronger than you think. What support do you need today?",
                        "Every small step counts in recovery. What would help you feel more supported?"
                    ];
                    response = responses[Math.floor(Math.random() * responses.length)];
                }
                
                addMessageToChat('AI', response, '#34d399');
            }, 1000);
        }
        
        function addMessageToChat(sender, message, color) {
            const chatMessages = document.getElementById('chatMessages');
            const messageDiv = document.createElement('div');
            messageDiv.style.marginBottom = '12px';
            messageDiv.style.padding = '12px 16px';
            messageDiv.style.borderRadius = '12px';
            messageDiv.style.backgroundColor = sender === 'You' ? '#1f2937' : '#374151';
            messageDiv.style.border = `1px solid ${color}`;
            messageDiv.style.whiteSpace = 'pre-line';
            messageDiv.style.lineHeight = '1.5';
            
            const senderSpan = document.createElement('span');
            senderSpan.style.color = color;
            senderSpan.style.fontWeight = '600';
            senderSpan.style.fontSize = '14px';
            senderSpan.textContent = sender + ': ';
            
            const messageSpan = document.createElement('span');
            messageSpan.style.color = '#f9fafb';
            messageSpan.style.fontSize = '14px';
            messageSpan.textContent = message;
            
            messageDiv.appendChild(senderSpan);
            messageDiv.appendChild(messageSpan);
            chatMessages.appendChild(messageDiv);
            
            // Scroll to bottom
            chatMessages.scrollTop = chatMessages.scrollHeight;
        }
        
        function handleChatKeyPress(event) {
            if (event.key === 'Enter') {
                sendMessage();
            }
        }
        
        function saveJournal() {
            const textarea = document.querySelector('.textarea');
            const moodSelect = document.getElementById('moodSelect');
            const entry = textarea.value.trim();
            const mood = moodSelect ? moodSelect.value : 'okay';
            
            if (!entry) {
                alert('Please write something before saving.');
                return;
            }
            
            // Save to localStorage for demo
            const journalEntry = {
                date: new Date().toLocaleDateString(),
                time: new Date().toLocaleTimeString(),
                mood: mood,
                content: entry
            };
            
            let entries = JSON.parse(localStorage.getItem('journalEntries') || '[]');
            entries.unshift(journalEntry);
            localStorage.setItem('journalEntries', JSON.stringify(entries));
            
            alert('Journal entry saved successfully! Keep reflecting on your journey.');
            textarea.value = '';
        }
        
        function viewJournalEntries() {
            const entries = JSON.parse(localStorage.getItem('journalEntries') || '[]');
            
            if (entries.length === 0) {
                alert('No journal entries yet. Start writing to track your journey!');
                return;
            }
            
            let entriesHtml = '<div class="card"><h2>Your Journal Entries</h2>';
            entries.forEach((entry, index) => {
                const moodEmoji = {
                    'great': '😊',
                    'good': '🙂',
                    'okay': '😐',
                    'struggling': '😔',
                    'difficult': '😰'
                }[entry.mood] || '😐';
                
                entriesHtml += `
                    <div style="background: #374151; padding: 16px; border-radius: 12px; margin-bottom: 12px; border: 1px solid #4b5563;">
                        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 8px;">
                            <span style="color: #60a5fa; font-weight: 600;">${moodEmoji} ${entry.mood.charAt(0).toUpperCase() + entry.mood.slice(1)}</span>
                            <span style="color: #9ca3af; font-size: 12px;">${entry.date} ${entry.time}</span>
                        </div>
                        <p style="color: #f9fafb; margin: 0; line-height: 1.5;">${entry.content}</p>
                    </div>
                `;
            });
            entriesHtml += '</div>';
            
            document.getElementById('content').innerHTML = entriesHtml;
        }
        
        function addExpense() {
            const amount = prompt('Enter expense amount:');
            if (amount && !isNaN(amount)) {
                // Save expense to localStorage
                const expense = {
                    id: Date.now(),
                    amount: parseFloat(amount),
                    date: new Date().toLocaleDateString(),
                    time: new Date().toLocaleTimeString(),
                    type: 'expense'
                };
                
                let expenses = JSON.parse(localStorage.getItem('expenses') || '[]');
                expenses.unshift(expense);
                localStorage.setItem('expenses', JSON.stringify(expenses));
                
                alert(`Expense of $${amount} added successfully!`);
                // Refresh finance view
                showTab('finance');
            } else {
                alert('Please enter a valid amount.');
            }
        }
        
        function addSavings() {
            const amount = prompt('Enter savings amount:');
            if (amount && !isNaN(amount)) {
                // Save savings to localStorage
                const saving = {
                    id: Date.now(),
                    amount: parseFloat(amount),
                    date: new Date().toLocaleDateString(),
                    time: new Date().toLocaleTimeString(),
                    type: 'savings'
                };
                
                let expenses = JSON.parse(localStorage.getItem('expenses') || '[]');
                expenses.unshift(saving);
                localStorage.setItem('expenses', JSON.stringify(expenses));
                
                alert(`Savings of $${amount} added successfully!`);
                // Refresh finance view
                showTab('finance');
            } else {
                alert('Please enter a valid amount.');
            }
        }
        
        function deleteExpense(expenseId) {
            if (confirm('Are you sure you want to delete this expense?')) {
                let expenses = JSON.parse(localStorage.getItem('expenses') || '[]');
                expenses = expenses.filter(expense => expense.id !== expenseId);
                localStorage.setItem('expenses', JSON.stringify(expenses));
                alert('Expense deleted successfully!');
                showTab('finance');
            }
        }
        
        function callEmergency() {
            if (confirm('Are you sure you want to call emergency services? This will dial 911.')) {
                alert('Emergency services will be contacted. Please stay safe.');
            }
        }
        
        function callContact(contactType) {
            const contacts = {
                'therapist': 'Dr. Sarah Johnson',
                'counselor': 'Mike Chen',
                'family': 'Mom & Dad',
                'support-group': 'Gamblers Anonymous'
            };
            
            const contactName = contacts[contactType];
            if (confirm(`Call ${contactName}?`)) {
                alert(`Calling ${contactName}... Stay strong!`);
            }
        }
        
        function addContact() {
            const name = prompt('Enter contact name:');
            if (name) {
                const phone = prompt('Enter phone number:');
                if (phone) {
                    // Save contact to localStorage
                    const contact = {
                        id: Date.now(),
                        name: name,
                        phone: phone,
                        type: 'personal'
                    };
                    
                    let contacts = JSON.parse(localStorage.getItem('contacts') || '[]');
                    contacts.push(contact);
                    localStorage.setItem('contacts', JSON.stringify(contacts));
                    
                    alert(`Contact "${name}" with phone "${phone}" added successfully!`);
                    // Refresh contacts view
                    showTab('contacts');
                } else {
                    alert('Contact not added - phone number required.');
                }
            } else {
                alert('Contact not added - name required.');
            }
        }
        
        function callSavedContact(name, phone) {
            if (confirm(`Call ${name} at ${phone}?`)) {
                alert(`Calling ${name}... Stay strong!`);
            }
        }
        
        function deleteContact(contactId) {
            if (confirm('Are you sure you want to delete this contact?')) {
                let contacts = JSON.parse(localStorage.getItem('contacts') || '[]');
                contacts = contacts.filter(contact => contact.id !== contactId);
                localStorage.setItem('contacts', JSON.stringify(contacts));
                alert('Contact deleted successfully!');
                showTab('contacts');
            }
        }
    </script>
</body>
</html>